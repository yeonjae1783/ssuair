<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">

<head>
    <title> SSUAIR </title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--<meta name="description" content="Bootstrap 4 Mobile App Template">-->
    <!--<meta name="author" content="Xiaoying Riley at 3rd Wave Media">-->
    <!--<link rel="shortcut icon" href="favicon.ico">-->
    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Maven+Pro:400,500,700|Nunito:400,600,700" rel="stylesheet">
    <!-- FontAwesome JS-->
    <script src="https://kit.fontawesome.com/849dcab7e5.js"></script>
    <!-- Theme CSS -->
    <link id="theme-style" rel="stylesheet" href="/static/css/theme.css">
</head>

<body>

<header class="header">
    <div class="branding">
        <div class="container position-relative">
            <nav class="navbar navbar-expand-lg">
                <h1 class="site-logo"><a class="navbar-brand" href="/">
                    <span class="logo-text"><i class="fas fa-fan"></i> SSUAIR</span></a></h1>
            </nav>
            <!-- // Free Version ONLY -->
            <ul class="social-list list-inline mb-0 position-absolute">
                <!--<li class="list-inline-item"><a class="text-dark" href="https://github.com/yeonjae1783/ssuair.git">-->
                    <!--<i class="fab fa-github fa-fw"></i></a></li>-->

                <li class="list-inline-item">
                    <span>  {{ formatted_now }}  <a href="/"><i class="fa fa-refresh"></i></a></span></li>
            </ul>
            <!--//social-list-->
        </div>
        <!--//container-->
    </div>
    <!--//branding-->
</header>
<!--//header-->

<section class="hero-section">
    <div class="container py-lg-5">
        <div class="row">
            <div class="col-12 col-md-10 pt-md-4">
                <h2 class="site-headline font-weight-bold pt-lg-5">약 한 시간 정도 <span style="color:#47b0df;">창문을 열면</span> 건강한 숨을 쉴 수 있습니다.</h2>
                <div class="site-tagline mb-3">
                    실내공기와 불쾌지수가 나쁜 반면 실외공기가 좋습니다. <br>
                    창문을 열지 않았을 때 한 시간 후 실내공기질이 나빠질 예정이니 창문을 여세요. <br>
                </div>
            </div>
        </div>
        <!--//row-->
    </div>
</section>
<!--//hero-section-->

<script>
    var rows = {{rows|tojson}};
    var data=[];
    var pm10=[];
    var temperature=[];
    var humidity=[];
    var discomfortIndex=[];
    var time=[];

    for (var i = 0; i < rows.length; i++) {

       data.push(rows[i]);
       temperature.push(rows[i]['field1']);
       humidity.push(rows[i]['field2']);
       discomfortIndex.push(1.8*temperature[i]-0.55*(1-humidity[i]/100)*(1.8*temperature[i]-26)+32);
       pm10.push(rows[i]['field6']);
       time.push(rows[i]['created_at']);
    }

    console.log(pm10);
    console.log(time);
</script>

<section class="features-section py-5">
    <div class="container py-lg-5">
        <h3 class="mb-3 text-center font-weight-bold section-heading"></h3>
        <div class="row pt-5 mb-5">
            <div class="col-12 col-lg-4">
                <div class="card rounded border-0 shadow-lg mb-5">
                    <div class="card-body p-4">
                        <h5 class="card-title mb-5"><i
                                class="far fa-chart-bar mr-2 mr-lg-3 text-primary fa-lg fa-fw"></i>불쾌지수</h5>
                        <!-- Progress bar 1 -->
                        <div class="progress mx-auto" data-value='80'>
                                <span class="progress-left">
                                    <span class="progress-bar border-primary"></span>
                                </span>
                            <span class="progress-right">
                                    <span class="progress-bar border-primary"></span>
                                </span>
                            <div class="progress-value w-100 h-100 rounded-circle d-flex align-items-center justify-content-center">
                                <h2 class="font-weight-bold">55<sup class="small">DI</sup></h2>
                            </div>
                        </div>
                        <!-- END -->
                        <!-- Demo info -->
                        <!--<div class="row text-center mt-4 mb-3">-->
                            <!--<div class="col-6 border-right">-->
                                <!--<h5 class="mb-0">28%</h5>-->
                                <!--<span class="small text-gray">Last week</span>-->
                            <!--</div>-->
                            <!--<div class="col-6">-->
                                <!--<h5 class="mb-0">60%</h5>-->
                                <!--<span class="small text-gray">Last month</span>-->
                            <!--</div>-->
                        <!--</div>-->
                        <!-- END -->
                        <a href="https://thingspeak.com/channels/768165">Learn more <span class="more-arrow">&rarr;</span></a>
                    </div>
                </div>
                <!--//card-->
            </div>
            <div class="col-12 col-lg-4">
                <div class="card rounded border-0 shadow-lg mb-5">
                    <div class="card-body p-4">
                        <h5 class="card-title mb-5"><i
                                class="fas fa-laptop-code mr-2 mr-lg-3 text-primary fa-lg fa-fw"></i>실내 미세먼지</h5>
                        <!-- Progress bar 2 -->
                        <div class="progress mx-auto" data-value='25'>
                                <span class="progress-left">
                                    <span class="progress-bar border-danger"></span>
                                </span>
                            <span class="progress-right">
                                    <span class="progress-bar border-danger"></span>
                                </span>
                            <div class="progress-value w-100 h-100 rounded-circle d-flex align-items-center justify-content-center">
                                <h2 class="font-weight-bold">{{ last_indoor }}<sup class="small">PM</sup></h2>
                            </div>
                        </div>
                        <!-- END -->
                        <!-- Demo info-->
                        <!--<div class="row text-center mt-4 mb-3">-->
                            <!--<div class="col-6 border-right">-->
                                <!--<h5 class="mb-0">28%</h5>-->
                                <!--<span class="small text-gray">Last week</span>-->
                            <!--</div>-->
                            <!--<div class="col-6">-->
                                <!--<h5 class="mb-0">60%</h5>-->
                                <!--<span class="small text-gray">Last month</span>-->
                            <!--</div>-->
                        <!--</div>-->
                        <!-- END -->
                        <a href="https://thingspeak.com/channels/768165">Learn more <span class="more-arrow">&rarr;</span></a>
                    </div>
                </div>
                <!--//card-->
            </div>
            <div class="col-12 col-lg-4">
                <div class="card rounded-lg border-0 shadow-lg">
                    <div class="card-body p-4">
                        <h5 class="card-title mb-5"><i
                                class="far fa-calendar-alt mr-2 mr-lg-3 text-primary fa-lg fa-fw"></i>실외 미세먼지</h5>
                        <!-- Progress bar 3 -->
                        <div class="progress mx-auto" data-value='76'>
                                <span class="progress-left">
                                    <span class="progress-bar border-success"></span>
                                </span>
                            <span class="progress-right">
                                    <span class="progress-bar border-success"></span>
                                </span>
                            <div class="progress-value w-100 h-100 rounded-circle d-flex align-items-center justify-content-center">
                                <h2 class="font-weight-bold">20<sup class="small">PM</sup></h2>
                            </div>
                        </div>
                        <!-- END -->
                        <!-- Demo info -->
                        <!--<div class="row text-center mt-4 mb-3">-->
                            <!--<div class="col-6 border-right">-->
                                <!--<h5 class="mb-0">28%</h5>-->
                                <!--<span class="small text-gray">Last week</span>-->
                            <!--</div>-->
                            <!--<div class="col-6">-->
                                <!--<h5 class="mb-0">60%</h5>-->
                                <!--<span class="small text-gray">Last month</span>-->
                            <!--</div>-->
                        <!--</div>-->
                        <!-- END -->
                        <a href="https://thingspeak.com/channels/768165">Learn more <span class="more-arrow">&rarr;</span></a>
                    </div>
                </div>
                <!--//card-->
            </div>
        </div>
    </div>
    <!--//container-->
</section>
<!--//features-section-->

<section class="cta-section py-5 text-center">
    <div class="container">
        <h3 class="font-weight-bold mb-3">미세먼지 예측 그래프</h3>
        <div class="mx-auto single-col-max-width section-intro">
            <canvas id="myChart"></canvas>
            <!--Try Nova Free Today. Lorem ipsum dolor sit-->
            <!--amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque-->
            <!--penatibus et magnis dis.-->
        </div>
    </div>
</section>
<!--//cta-section-->

<!--<footer class="footer theme-bg-primary">-->
    <!--<div class="container py-5 mb-3">-->
        <!--<div class="row">-->
            <!--<div class="footer-col col-6 col-lg-3">-->
                <!--<h4 class="col-heading">About Nova</h4>-->
                <!--<ul class="list-unstyled">-->
                    <!--<li><a href="#">Our Story</a></li>-->
                    <!--<li><a href="#">Pricing</a></li>-->
                    <!--<li><a href="#">Contact</a></li>-->
                    <!--<li><a href="#">Jobs</a></li>-->
                <!--</ul>-->
            <!--</div>-->
            <!--&lt;!&ndash;//footer-col&ndash;&gt;-->
        <!--</div>-->
        <!--&lt;!&ndash;//row&ndash;&gt;-->
    <!--</div>-->
    <!--&lt;!&ndash;//container&ndash;&gt;-->
    <!--<div class="container">-->
        <!--<hr>-->
    <!--</div>-->
    <!--<div class="download-area py-4">-->
        <!--<div class="container text-center">-->
            <!--<h3 class="mb-3">Get the app</h3>-->
            <!--<div class="section-intro mb-4 single-col-max-width mx-auto">Download our apps now. lorem ipsum dolor sit-->
                <!--amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque-->
                <!--penatibus et magnis dis.-->
            <!--</div>-->
        <!--</div>-->
        <!--&lt;!&ndash;//container&ndash;&gt;-->
    <!--</div>-->
    <!--&lt;!&ndash;//download-area&ndash;&gt;-->
<!--</footer>-->
<!--//footer-->

<!-- Javascript -->
<script type="text/javascript" src="/static/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="/static/js/popper.min.js"></script>
<script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/static/js/moment.js"></script>
<script type="text/javascript" src="/static/js/Chart.min.js"></script>
<script type="text/javascript" src="/static/js/utils.js"></script>

<!--TODO response 데이터로 변경 필요 - 주희-->
<!--[documentation]https://www.chartjs.org/-->
<script>
function newDate() {
  return moment().add(days, 'd');
}

var config = {
  type: 'line',
  data: {
    labels: ['00:00','01:00', '02:00', '03:00', '04:00', '05:00', '06:00','07:00','08:00','09:00','10:00','11:00',
    '12:00','13:00','14:00','15:00','16:00','17:00','18:00','19:00','20:00','21:00','22:00','23:00','23:59'],
    datasets: [{
      label: "미세먼지",
      data: pm10,
      borderColor: 'rgba(237, 110, 113, 1)',
      backgroundColor: 'rgba(237, 110, 113, 0.2)',
    },{
      label: "LSTM",
      data: [20,24,25,32,33,30,28,25,24,31,31,31,35,30,28,26,30,30,33,38,40],
       borderColor: 'rgba(85, 161, 219, 1)',
       backgroundColor: 'rgba(85, 161, 219, 0.2)',
    },{
      label: "ARIMA",
      data: [30,28,24,25,25,26,28,28,27,28,29,31,32,33,30,28,33,33,33,35,35],
       borderColor: 'rgba(108, 190, 191, 1)',
       backgroundColor: 'rgba(108, 190, 191, 0.2)',
    }]
  },
  options: {
    scales: {
      xAxes:[{
  type: 'time',
  time: {
    format: "HH:mm",
    unit: 'hour',
    unitStepSize: 1,
    displayFormats: {
      'minute': 'HH:mm',
      'hour': 'HH:mm',
      min: '00:00',
      max: '23:59'
    },
}}],
    },
  }
};

var ctx = document.getElementById("myChart").getContext("2d");
new Chart(ctx, config);
</script>


<!--Circular Progress Bar-->
<!--https://bootstrapious.com/p/circular-progress-bar-->
<script>
    $(function() {

        $(".progress").each(function() {

            var value = $(this).attr('data-value');
            var left = $(this).find('.progress-left .progress-bar');
            var right = $(this).find('.progress-right .progress-bar');

            if (value > 0) {
                if (value <= 50) {
                    right.css('transform', 'rotate(' + percentageToDegrees(value) + 'deg)')
                } else {
                    right.css('transform', 'rotate(180deg)')
                    left.css('transform', 'rotate(' + percentageToDegrees(value - 50) + 'deg)')
                }
            }

        })

        function percentageToDegrees(percentage) {

            return percentage / 100 * 360

        }

    });

</script>
</body>

</html>
